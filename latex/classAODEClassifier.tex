\hypertarget{classAODEClassifier}{}\doxysection{A\+O\+D\+E\+Classifier Class Reference}
\label{classAODEClassifier}\index{AODEClassifier@{AODEClassifier}}


Inheritance diagram for A\+O\+D\+E\+Classifier\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=169pt]{classAODEClassifier__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for A\+O\+D\+E\+Classifier\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{classAODEClassifier__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classAODEClassifier_a8de6e05a2d873331f70fff22f2a3f12d}{A\+O\+D\+E\+Classifier}} ()
\item 
virtual void \mbox{\hyperlink{classAODEClassifier_afed224721f344d6b6de0aec6670350fe}{build\+Classifier}} (int num\+\_\+classes)
\item 
\mbox{\Hypertarget{classAODEClassifier_a49447a9a05908952b3faf9508bfe161c}\label{classAODEClassifier_a49447a9a05908952b3faf9508bfe161c}} 
virtual void {\bfseries add\+Example} (const void $\ast$obj, int tag)
\item 
virtual bool \mbox{\hyperlink{classAODEClassifier_a9d9f28652f89b9ef43b1f8c872331967}{distribution\+For\+Instance}} (const void $\ast$obj, double $\ast$dist)
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classAODEClassifier_a8de6e05a2d873331f70fff22f2a3f12d}\label{classAODEClassifier_a8de6e05a2d873331f70fff22f2a3f12d}} 
\index{AODEClassifier@{AODEClassifier}!AODEClassifier@{AODEClassifier}}
\index{AODEClassifier@{AODEClassifier}!AODEClassifier@{AODEClassifier}}
\doxysubsubsection{\texorpdfstring{AODEClassifier()}{AODEClassifier()}}
{\footnotesize\ttfamily A\+O\+D\+E\+Classifier\+::\+A\+O\+D\+E\+Classifier (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

An att\textquotesingle{}s frequency must be this value or more to be a super\+Parent

If true, outputs debugging info

flag for using m-\/estimates

value for m in m-\/estimate
\begin{DoxyCode}{0}
\DoxyCodeLine{5                                \{}
\DoxyCodeLine{7     m\_Limit = 1;}
\DoxyCodeLine{9     m\_Debug = \textcolor{keyword}{false};}
\DoxyCodeLine{11     m\_MEstimates = \textcolor{keyword}{false};}
\DoxyCodeLine{13     m\_Weight = 1;}
\DoxyCodeLine{14 \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classAODEClassifier_afed224721f344d6b6de0aec6670350fe}\label{classAODEClassifier_afed224721f344d6b6de0aec6670350fe}} 
\index{AODEClassifier@{AODEClassifier}!buildClassifier@{buildClassifier}}
\index{buildClassifier@{buildClassifier}!AODEClassifier@{AODEClassifier}}
\doxysubsubsection{\texorpdfstring{buildClassifier()}{buildClassifier()}}
{\footnotesize\ttfamily void A\+O\+D\+E\+Classifier\+::build\+Classifier (\begin{DoxyParamCaption}\item[{int}]{num\+\_\+classes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Generates the classifier.


\begin{DoxyParams}{Parameters}
{\em instances} & set of instances serving as training data \\
\hline
\end{DoxyParams}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & if the classifier has not been generated successfully \\
\hline
\end{DoxyExceptions}


Implements \mbox{\hyperlink{classClassifier}{Classifier}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{28                                                     \{}
\DoxyCodeLine{29     \textcolor{comment}{// reset variable for this fold}}
\DoxyCodeLine{30     m\_SumInstances = 0;}
\DoxyCodeLine{31     m\_ClassIndex = feature\_extractor-\/>get\_num\_features();}
\DoxyCodeLine{32     m\_NumInstances = 0;}
\DoxyCodeLine{33     m\_NumAttributes = feature\_extractor-\/>get\_num\_features() + 1;}
\DoxyCodeLine{34     m\_NumClasses = num\_classes;}
\DoxyCodeLine{35 }
\DoxyCodeLine{36     \textcolor{comment}{// allocate space for attribute reference arrays}}
\DoxyCodeLine{37     m\_StartAttIndex = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[m\_NumAttributes];}
\DoxyCodeLine{38     m\_NumAttValues = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[m\_NumAttributes];}
\DoxyCodeLine{39 }
\DoxyCodeLine{40     m\_TotalAttValues = 0;}
\DoxyCodeLine{41     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_NumAttributes; i++) \{}
\DoxyCodeLine{42         \textcolor{keywordflow}{if} (i != m\_ClassIndex) \{}
\DoxyCodeLine{43             m\_StartAttIndex[i] = m\_TotalAttValues;}
\DoxyCodeLine{44             m\_NumAttValues[i] = feature\_extractor-\/>get\_feature\_domain\_size(i);}
\DoxyCodeLine{45             m\_TotalAttValues += m\_NumAttValues[i] + 1;}
\DoxyCodeLine{46             \textcolor{comment}{// + 1 so room for missing value count}}
\DoxyCodeLine{47         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{48             \textcolor{comment}{// m\_StartAttIndex[i] = -\/1;  // class isn't included}}
\DoxyCodeLine{49             m\_NumAttValues[i] = m\_NumClasses;}
\DoxyCodeLine{50         \}}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{comment}{// allocate space for counts and frequencies}}
\DoxyCodeLine{54     \textcolor{comment}{//m\_CondiCounts = new double[m\_NumClasses][m\_TotalAttValues][m\_TotalAttValues];}}
\DoxyCodeLine{55     \textcolor{comment}{//m\_SumForCounts = new double*[m\_NumClasses][m\_NumAttributes];}}
\DoxyCodeLine{56     m\_CondiCounts = \textcolor{keyword}{new} \textcolor{keywordtype}{double} **[m\_NumClasses];}
\DoxyCodeLine{57     m\_SumForCounts = \textcolor{keyword}{new} \textcolor{keywordtype}{double} *[m\_NumClasses];}
\DoxyCodeLine{58     m\_ClassCounts = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[m\_NumClasses];}
\DoxyCodeLine{59     m\_Frequencies = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[m\_TotalAttValues];}
\DoxyCodeLine{60     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < m\_NumClasses; i++) \{}
\DoxyCodeLine{61         m\_CondiCounts[i] = \textcolor{keyword}{new} \textcolor{keywordtype}{double} *[m\_TotalAttValues];}
\DoxyCodeLine{62         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < m\_TotalAttValues; j++) \{}
\DoxyCodeLine{63             m\_CondiCounts[i][j] = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[m\_TotalAttValues];}
\DoxyCodeLine{64             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < m\_TotalAttValues; k++) \{}
\DoxyCodeLine{65                 m\_CondiCounts[i][j][k] = 0;}
\DoxyCodeLine{66             \}}
\DoxyCodeLine{67         \}}
\DoxyCodeLine{68         m\_SumForCounts[i] = \textcolor{keyword}{new} \textcolor{keywordtype}{double}[m\_NumAttributes];}
\DoxyCodeLine{69         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < m\_NumAttributes; j++) \{}
\DoxyCodeLine{70             m\_SumForCounts[i][j] = 0;}
\DoxyCodeLine{71         \}}
\DoxyCodeLine{72         m\_ClassCounts[i] = 0;}
\DoxyCodeLine{73     \}}
\DoxyCodeLine{74 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAODEClassifier_a9d9f28652f89b9ef43b1f8c872331967}\label{classAODEClassifier_a9d9f28652f89b9ef43b1f8c872331967}} 
\index{AODEClassifier@{AODEClassifier}!distributionForInstance@{distributionForInstance}}
\index{distributionForInstance@{distributionForInstance}!AODEClassifier@{AODEClassifier}}
\doxysubsubsection{\texorpdfstring{distributionForInstance()}{distributionForInstance()}}
{\footnotesize\ttfamily bool A\+O\+D\+E\+Classifier\+::distribution\+For\+Instance (\begin{DoxyParamCaption}\item[{const void $\ast$}]{obj,  }\item[{double $\ast$}]{dist }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Calculates the class membership probabilities for the given test instance.


\begin{DoxyParams}{Parameters}
{\em instance} & the instance to be classified \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
predicted class probability distribution 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Exception} & if there is a problem generating the prediction \\
\hline
\end{DoxyExceptions}


Implements \mbox{\hyperlink{classClassifier}{Classifier}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{128                                                                           \{}
\DoxyCodeLine{129     vector<int> features;}
\DoxyCodeLine{130     feature\_extractor-\/>extract\_features(obj, features);}
\DoxyCodeLine{131 }
\DoxyCodeLine{132     \textcolor{comment}{// accumulates posterior probabilities for each class}}
\DoxyCodeLine{133     \textcolor{keywordtype}{double} *probs = dist;    \textcolor{comment}{//new double[m\_NumClasses];}}
\DoxyCodeLine{134     \textcolor{comment}{//double *probs = new double[m\_NumClasses];}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{comment}{// index for parent attribute value, and a count of parents used}}
\DoxyCodeLine{137     \textcolor{keywordtype}{int} pIndex, parentCount;}
\DoxyCodeLine{138 }
\DoxyCodeLine{139     \textcolor{comment}{// pointers for efficiency}}
\DoxyCodeLine{140     \textcolor{comment}{// for current class, point to joint frequency for any pair of att values}}
\DoxyCodeLine{141     \textcolor{keywordtype}{double} **countsForClass;}
\DoxyCodeLine{142     \textcolor{comment}{// for current class \& parent, point to joint frequency for any att value}}
\DoxyCodeLine{143     \textcolor{keywordtype}{double} *countsForClassParent;}
\DoxyCodeLine{144 }
\DoxyCodeLine{145     \textcolor{comment}{// store instance's att indexes in an int array, so accessing them}}
\DoxyCodeLine{146     \textcolor{comment}{// is more efficient in loop(s).}}
\DoxyCodeLine{147     \textcolor{keywordtype}{int} *attIndex = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[m\_NumAttributes];}
\DoxyCodeLine{148     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} att = 0; att < m\_NumAttributes; att++) \{}
\DoxyCodeLine{149         \textcolor{keywordflow}{if} (att == m\_ClassIndex)}
\DoxyCodeLine{150             attIndex[att] = -\/1;  \textcolor{comment}{// can't use class or missing values in calculations}}
\DoxyCodeLine{151         \textcolor{keywordflow}{else}}
\DoxyCodeLine{152             attIndex[att] = m\_StartAttIndex[att] + features[att];}
\DoxyCodeLine{153     \}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155     \textcolor{comment}{// calculate probabilities for each possible class value}}
\DoxyCodeLine{156     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} classVal = 0; classVal < m\_NumClasses; classVal++) \{}
\DoxyCodeLine{157         probs[classVal] = 0;}
\DoxyCodeLine{158         \textcolor{keywordtype}{double} spodeP = 0; \textcolor{comment}{// P(X,y) for current parent and class}}
\DoxyCodeLine{159         parentCount = 0;}
\DoxyCodeLine{160 }
\DoxyCodeLine{161         countsForClass = m\_CondiCounts[classVal];}
\DoxyCodeLine{162 }
\DoxyCodeLine{163         \textcolor{comment}{// each attribute has a turn of being the parent}}
\DoxyCodeLine{164         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} parent = 0; parent < m\_NumAttributes; parent++) \{}
\DoxyCodeLine{165             \textcolor{keywordflow}{if} (attIndex[parent] == -\/1)}
\DoxyCodeLine{166                 \textcolor{keywordflow}{continue};  \textcolor{comment}{// skip class attribute or missing value}}
\DoxyCodeLine{167 }
\DoxyCodeLine{168             \textcolor{comment}{// determine correct index for the parent in m\_CondiCounts matrix}}
\DoxyCodeLine{169             pIndex = attIndex[parent];}
\DoxyCodeLine{170 }
\DoxyCodeLine{171             \textcolor{comment}{// check that the att value has a frequency of m\_Limit or greater}}
\DoxyCodeLine{172             \textcolor{keywordflow}{if} (m\_Frequencies[pIndex] < m\_Limit)}
\DoxyCodeLine{173                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{174 }
\DoxyCodeLine{175             countsForClassParent = countsForClass[pIndex];}
\DoxyCodeLine{176 }
\DoxyCodeLine{177             \textcolor{comment}{// block the parent from being its own child}}
\DoxyCodeLine{178             attIndex[parent] = -\/1;}
\DoxyCodeLine{179 }
\DoxyCodeLine{180             parentCount++;}
\DoxyCodeLine{181 }
\DoxyCodeLine{182             \textcolor{comment}{// joint frequency of class and parent}}
\DoxyCodeLine{183             \textcolor{keywordtype}{double} classparentfreq = countsForClassParent[pIndex];}
\DoxyCodeLine{184 }
\DoxyCodeLine{185             \textcolor{comment}{// find the number of missing values for parent's attribute}}
\DoxyCodeLine{186             \textcolor{keywordtype}{double} missing4ParentAtt =}
\DoxyCodeLine{187                 m\_Frequencies[m\_StartAttIndex[parent] + m\_NumAttValues[parent]];}
\DoxyCodeLine{188 }
\DoxyCodeLine{189             \textcolor{comment}{// calculate the prior probability -\/-\/ P(parent \& classVal)}}
\DoxyCodeLine{190             \textcolor{keywordflow}{if} (!m\_MEstimates) \{}
\DoxyCodeLine{191                 spodeP = (classparentfreq + 1.0)}
\DoxyCodeLine{192                          / ((m\_SumInstances -\/ missing4ParentAtt) + m\_NumClasses}
\DoxyCodeLine{193                             * m\_NumAttValues[parent]);}
\DoxyCodeLine{194             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{195                 spodeP = (classparentfreq + ((double)m\_Weight}
\DoxyCodeLine{196                                              / (\textcolor{keywordtype}{double})(m\_NumClasses * m\_NumAttValues[parent])))}
\DoxyCodeLine{197                          / ((m\_SumInstances -\/ missing4ParentAtt) + m\_Weight);}
\DoxyCodeLine{198             \}}
\DoxyCodeLine{199 }
\DoxyCodeLine{200             \textcolor{comment}{// take into account the value of each attribute}}
\DoxyCodeLine{201             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} att = 0; att < m\_NumAttributes; att++) \{}
\DoxyCodeLine{202                 \textcolor{keywordflow}{if} (attIndex[att] == -\/1)}
\DoxyCodeLine{203                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{204 }
\DoxyCodeLine{205                 \textcolor{keywordtype}{double} missingForParentandChildAtt =}
\DoxyCodeLine{206                     countsForClassParent[m\_StartAttIndex[att] + m\_NumAttValues[att]];}
\DoxyCodeLine{207 }
\DoxyCodeLine{208                 \textcolor{keywordflow}{if} (!m\_MEstimates) \{}
\DoxyCodeLine{209                     spodeP *= (countsForClassParent[attIndex[att]] + 1.0)}
\DoxyCodeLine{210                               / ((classparentfreq -\/ missingForParentandChildAtt)}
\DoxyCodeLine{211                                  + m\_NumAttValues[att]);}
\DoxyCodeLine{212                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{213                     spodeP *= (countsForClassParent[attIndex[att]]}
\DoxyCodeLine{214                                + ((double)m\_Weight / (\textcolor{keywordtype}{double})m\_NumAttValues[att]))}
\DoxyCodeLine{215                               / ((classparentfreq -\/ missingForParentandChildAtt)}
\DoxyCodeLine{216                                  + m\_Weight);}
\DoxyCodeLine{217                 \}}
\DoxyCodeLine{218             \}}
\DoxyCodeLine{219 }
\DoxyCodeLine{220             \textcolor{comment}{// add this probability to the overall probability}}
\DoxyCodeLine{221             probs[classVal] += spodeP;}
\DoxyCodeLine{222 }
\DoxyCodeLine{223             \textcolor{comment}{// unblock the parent}}
\DoxyCodeLine{224             attIndex[parent] = pIndex;}
\DoxyCodeLine{225         \}}
\DoxyCodeLine{226 }
\DoxyCodeLine{227         \textcolor{comment}{// check that at least one att was a parent}}
\DoxyCodeLine{228         \textcolor{keywordflow}{if} (parentCount < 1) \{}
\DoxyCodeLine{229             \textcolor{comment}{// do plain naive bayes conditional prob}}
\DoxyCodeLine{230             probs[classVal] = NBconditionalProb(features, classVal);}
\DoxyCodeLine{231         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{232             \textcolor{comment}{// divide by number of parent atts to get the mean}}
\DoxyCodeLine{233             probs[classVal] /= (double)(parentCount);}
\DoxyCodeLine{234         \}}
\DoxyCodeLine{235     \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237     normalize(probs, m\_NumClasses);}
\DoxyCodeLine{238     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{239 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/search/learning/A\+O\+D\+E.\+h\item 
src/search/learning/A\+O\+D\+E.\+cc\end{DoxyCompactItemize}
