<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resilient Planner: src/search/resilient_planner.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Resilient Planner
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_5e53e25df8c865d23c4f0f620d3a69fb.html">search</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">resilient_planner.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;globals.h&quot;</code><br />
<code>#include &quot;operator.h&quot;</code><br />
<code>#include &quot;option_parser.h&quot;</code><br />
<code>#include &quot;ext/tree_util.hh&quot;</code><br />
<code>#include &quot;timer.h&quot;</code><br />
<code>#include &quot;utilities.h&quot;</code><br />
<code>#include &quot;search_engines/search_engine.h&quot;</code><br />
<code>#include &quot;regression.h&quot;</code><br />
<code>#include &quot;policy.h&quot;</code><br />
<code>#include &quot;partial_state.h&quot;</code><br />
<code>#include &quot;resilient_node.h&quot;</code><br />
<code>#include &quot;resilient_policy.h&quot;</code><br />
<code>#include &quot;print_utils.h&quot;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;list&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;stack&gt;</code><br />
<code>#include &lt;tr1/functional&gt;</code><br />
<code>#include &lt;tr1/unordered_map&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for resilient_planner.cc:</div>
<div class="dyncontent">
<div class="center"><img src="resilient__planner_8cc__incl.png" border="0" usemap="#asrc_2search_2resilient__planner_8cc" alt=""/></div>
<map name="asrc_2search_2resilient__planner_8cc" id="asrc_2search_2resilient__planner_8cc">
<area shape="rect" title=" " alt="" coords="1699,5,1845,47"/>
<area shape="rect" href="globals_8h_source.html" title=" " alt="" coords="1882,789,1963,815"/>
<area shape="rect" title=" " alt="" coords="1663,945,1721,972"/>
<area shape="rect" title=" " alt="" coords="2738,945,2801,972"/>
<area shape="rect" title=" " alt="" coords="1510,871,1567,897"/>
<area shape="rect" href="search_2operator_8h_source.html" title=" " alt="" coords="1875,707,1963,733"/>
<area shape="rect" href="partial__state_8h_source.html" title=" " alt="" coords="2293,789,2409,815"/>
<area shape="rect" href="option__parser_8h_source.html" title=" " alt="" coords="1347,169,1469,196"/>
<area shape="rect" href="utilities_8h_source.html" title=" " alt="" coords="1017,789,1100,815"/>
<area shape="rect" title=" " alt="" coords="625,871,735,897"/>
<area shape="rect" href="tree__util_8hh_source.html" title=" " alt="" coords="441,789,537,815"/>
<area shape="rect" href="policy_8h_source.html" title=" " alt="" coords="1946,244,2017,271"/>
<area shape="rect" title=" " alt="" coords="1733,475,1776,502"/>
<area shape="rect" href="regression_8h_source.html" title=" " alt="" coords="1937,393,2039,420"/>
<area shape="rect" href="search__engine_8h_source.html" title=" " alt="" coords="2960,468,3131,509"/>
<area shape="rect" href="timer_8h_source.html" title=" " alt="" coords="2725,707,2793,733"/>
<area shape="rect" href="resilient__node_8h_source.html" title=" " alt="" coords="2435,244,2562,271"/>
<area shape="rect" href="resilient__policy_8h_source.html" title=" " alt="" coords="1925,169,2056,196"/>
<area shape="rect" title=" " alt="" coords="2587,244,2733,271"/>
<area shape="rect" href="print__utils_8h_source.html" title=" " alt="" coords="1988,95,2087,121"/>
<area shape="rect" title=" " alt="" coords="3423,95,3491,121"/>
<area shape="rect" title=" " alt="" coords="2241,871,2305,897"/>
<area shape="rect" title=" " alt="" coords="1812,871,1863,897"/>
<area shape="rect" title=" " alt="" coords="2849,945,2892,972"/>
<area shape="rect" title=" " alt="" coords="1186,871,1246,897"/>
<area shape="rect" title=" " alt="" coords="1097,871,1162,897"/>
<area shape="rect" title=" " alt="" coords="737,945,807,972"/>
<area shape="rect" title=" " alt="" coords="2037,945,2117,972"/>
<area shape="rect" title=" " alt="" coords="1428,789,1503,815"/>
<area shape="rect" href="search_2state_8h_source.html" title=" " alt="" coords="2431,871,2497,897"/>
<area shape="rect" title=" " alt="" coords="1379,244,1437,271"/>
<area shape="rect" title=" " alt="" coords="495,945,580,972"/>
<area shape="rect" title=" " alt="" coords="5,945,83,972"/>
<area shape="rect" href="option__parser__util_8h_source.html" title=" " alt="" coords="1102,707,1253,733"/>
<area shape="rect" href="heuristic_8h_source.html" title=" " alt="" coords="2529,707,2687,733"/>
<area shape="rect" title=" " alt="" coords="765,789,806,815"/>
<area shape="rect" href="tree_8hh_source.html" title=" " alt="" coords="279,871,347,897"/>
<area shape="rect" title=" " alt="" coords="831,789,943,815"/>
<area shape="rect" title=" " alt="" coords="945,871,1021,897"/>
<area shape="rect" title=" " alt="" coords="107,945,178,972"/>
<area shape="rect" title=" " alt="" coords="202,945,289,972"/>
<area shape="rect" title=" " alt="" coords="313,945,383,972"/>
<area shape="rect" title=" " alt="" coords="407,945,470,972"/>
<area shape="rect" href="scalar__evaluator_8h_source.html" title=" " alt="" coords="2535,781,2681,823"/>
<area shape="rect" href="operator__cost_8h_source.html" title=" " alt="" coords="3061,789,3195,815"/>
<area shape="rect" title=" " alt="" coords="2011,319,2085,345"/>
<area shape="rect" href="deadend_8h_source.html" title=" " alt="" coords="2160,319,2251,345"/>
<area shape="rect" href="search__space_8h_source.html" title=" " alt="" coords="3011,557,3146,584"/>
<area shape="rect" href="search__progress_8h_source.html" title=" " alt="" coords="2683,632,2835,659"/>
<area shape="rect" href="search__node__info_8h_source.html" title=" " alt="" coords="2510,632,2658,659"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa6a18ede93ebee32f9d8ede050060bfc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="resilient__planner_8cc.html#aa6a18ede93ebee32f9d8ede050060bfc">resiliency_check</a> (<a class="el" href="classResilientNode.html">ResilientNode</a> node)</td></tr>
<tr class="separator:aa6a18ede93ebee32f9d8ede050060bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b775db41306409b3ee8cfcdfcb139a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="resilient__planner_8cc.html#ac9b775db41306409b3ee8cfcdfcb139a">replan</a> (<a class="el" href="classResilientNode.html">ResilientNode</a> current_node, <a class="el" href="classSearchEngine.html">SearchEngine</a> *engine)</td></tr>
<tr class="memdesc:ac9b775db41306409b3ee8cfcdfcb139a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to replan from the state contained in current_node to the goal. The search engine is resetted and not recreated to avoid the overhead of the initialization. The plan is saved inside the engine object and can be retrieved from it.  <a href="resilient__planner_8cc.html#ac9b775db41306409b3ee8cfcdfcb139a">More...</a><br /></td></tr>
<tr class="separator:ac9b775db41306409b3ee8cfcdfcb139a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacbb7c5f0c355829e26b6c814e5928a3"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classOperator.html">Operator</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="resilient__planner_8cc.html#aacbb7c5f0c355829e26b6c814e5928a3">extract_solution</a> ()</td></tr>
<tr class="memdesc:aacbb7c5f0c355829e26b6c814e5928a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract the final resilient plan, starting by the initial state and choosing only actions that lead to resilient states until the goal is reached.  <a href="resilient__planner_8cc.html#aacbb7c5f0c355829e26b6c814e5928a3">More...</a><br /></td></tr>
<tr class="separator:aacbb7c5f0c355829e26b6c814e5928a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebd6c30e5abaf54ecde117284cf848d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="resilient__planner_8cc.html#acebd6c30e5abaf54ecde117284cf848d">update_non_resilient_nodes</a> (<a class="el" href="classResilientNode.html">ResilientNode</a> node)</td></tr>
<tr class="memdesc:acebd6c30e5abaf54ecde117284cf848d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update non resilient nodes with every &lt;s,k',V'&gt; such that V' is a subset of V and k' = k - |V \ V'|.  <a href="resilient__planner_8cc.html#acebd6c30e5abaf54ecde117284cf848d">More...</a><br /></td></tr>
<tr class="separator:acebd6c30e5abaf54ecde117284cf848d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa25c3b70511fc6df748102e991dd13bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="resilient__planner_8cc.html#aa25c3b70511fc6df748102e991dd13bd">add_non_resilient_deadends</a> (<a class="el" href="classResilientNode.html">ResilientNode</a> node)</td></tr>
<tr class="memdesc:aa25c3b70511fc6df748102e991dd13bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Regress the state contained in node and add every state-action pair Regr(s,A) to the fault model policy map indexed by the current (k,V).  <a href="resilient__planner_8cc.html#aa25c3b70511fc6df748102e991dd13bd">More...</a><br /></td></tr>
<tr class="separator:aa25c3b70511fc6df748102e991dd13bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a217dbf8b442f20279ea00b898af96f52"><td class="memItemLeft" align="right" valign="top"><a id="a217dbf8b442f20279ea00b898af96f52"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (int argc, const char **argv)</td></tr>
<tr class="separator:a217dbf8b442f20279ea00b898af96f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a91aaa839623e3a8e1fe1cbfae5bcff5d"><td class="memItemLeft" align="right" valign="top"><a id="a91aaa839623e3a8e1fe1cbfae5bcff5d"></a>
std::tr1::unordered_map&lt; int, <a class="el" href="classResilientNode.html">ResilientNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>resilient_nodes</b></td></tr>
<tr class="separator:a91aaa839623e3a8e1fe1cbfae5bcff5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ba447c808ffc748cc2636c9ed2eadf"><td class="memItemLeft" align="right" valign="top"><a id="a30ba447c808ffc748cc2636c9ed2eadf"></a>
std::tr1::unordered_map&lt; int, <a class="el" href="classResilientNode.html">ResilientNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>non_resilient_nodes</b></td></tr>
<tr class="separator:a30ba447c808ffc748cc2636c9ed2eadf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b51216a3f70b80d937f08dfa6b2506e"><td class="memItemLeft" align="right" valign="top"><a id="a9b51216a3f70b80d937f08dfa6b2506e"></a>
std::stack&lt; <a class="el" href="classResilientNode.html">ResilientNode</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>open</b></td></tr>
<tr class="separator:a9b51216a3f70b80d937f08dfa6b2506e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa25c3b70511fc6df748102e991dd13bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa25c3b70511fc6df748102e991dd13bd">&#9670;&nbsp;</a></span>add_non_resilient_deadends()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_non_resilient_deadends </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classResilientNode.html">ResilientNode</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Regress the state contained in node and add every state-action pair Regr(s,A) to the fault model policy map indexed by the current (k,V). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Node containing the state to regress and the current (k,V). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aacbb7c5f0c355829e26b6c814e5928a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacbb7c5f0c355829e26b6c814e5928a3">&#9670;&nbsp;</a></span>extract_solution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="classOperator.html">Operator</a> &gt; extract_solution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract the final resilient plan, starting by the initial state and choosing only actions that lead to resilient states until the goal is reached. </p>
<dl class="section return"><dt>Returns</dt><dd>The plan extracted. </dd></dl>

</div>
</div>
<a id="ac9b775db41306409b3ee8cfcdfcb139a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b775db41306409b3ee8cfcdfcb139a">&#9670;&nbsp;</a></span>replan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool replan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classResilientNode.html">ResilientNode</a>&#160;</td>
          <td class="paramname"><em>current_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSearchEngine.html">SearchEngine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to replan from the state contained in current_node to the goal. The search engine is resetted and not recreated to avoid the overhead of the initialization. The plan is saved inside the engine object and can be retrieved from it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_node</td><td>The node containing the state to replan from. </td></tr>
    <tr><td class="paramname">engine</td><td>The search engine originally created. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the replan succeds, false otherwise. </dd></dl>

</div>
</div>
<a id="aa6a18ede93ebee32f9d8ede050060bfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a18ede93ebee32f9d8ede050060bfc">&#9670;&nbsp;</a></span>resiliency_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool resiliency_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classResilientNode.html">ResilientNode</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks if the given node is resilient, using the current global policy to find the applicable next actions then the <a class="el" href="classStateRegistry.html">StateRegistry</a> linked to the state of the node to find the successors of the node. The check is the same as the one in the pseudocode: (⟨s[a], k, V ⟩ ∈ R ∨ s[a] |= G) ∧ ⟨s, k − 1, V ∪ {a}⟩ ∈ R. It also add the node to resilient_nodes list if the check succeds. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>The node to check if is resilient or not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the node is resilient, false otherwise. </dd></dl>

</div>
</div>
<a id="acebd6c30e5abaf54ecde117284cf848d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebd6c30e5abaf54ecde117284cf848d">&#9670;&nbsp;</a></span>update_non_resilient_nodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_non_resilient_nodes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classResilientNode.html">ResilientNode</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update non resilient nodes with every &lt;s,k',V'&gt; such that V' is a subset of V and k' = k - |V \ V'|. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Deadend node to insert in the list non-resilient nodes. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
